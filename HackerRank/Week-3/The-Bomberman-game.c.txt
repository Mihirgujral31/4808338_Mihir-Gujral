#include <stdio.h>
#include <string.h>

#define MAX 210

int r, c, n;
char grid[MAX][MAX];
char nextGrid[MAX][MAX];

void fillBombs() {
    for (int i = 0; i < r; i++)
        for (int j = 0; j < c; j++)
            grid[i][j] = 'O';
}

void explode(char source[MAX][MAX]) {
    for (int i = 0; i < r; i++)
        for (int j = 0; j < c; j++)
            nextGrid[i][j] = 'O';

    int dx[] = {0, 1, -1, 0, 0};
    int dy[] = {0, 0, 0, 1, -1};

    for (int i = 0; i < r; i++) {
        for (int j = 0; j < c; j++) {
            if (source[i][j] == 'O') {
                for (int d = 0; d < 5; d++) {
                    int ni = i + dx[d], nj = j + dy[d];
                    if (ni >= 0 && ni < r && nj >= 0 && nj < c)
                        nextGrid[ni][nj] = '.';
                }
            }
        }
    }

    for (int i = 0; i < r; i++)
        for (int j = 0; j < c; j++)
            grid[i][j] = nextGrid[i][j];
}

int main() {
    scanf("%d %d %d", &r, &c, &n);

    for (int i = 0; i < r; i++)
        scanf("%s", grid[i]);

    if (n == 1) {
    } else if (n % 2 == 0) {
        fillBombs();
    } else {
        explode(grid);
        if (n % 4 == 1) {
            explode(grid);
        }
    }

    for (int i = 0; i < r; i++) {
        printf("%s\n", grid[i]);
    }

    return 0;
}
